!HQ-Server-R1 Config

enable

conf t

hostname HQ-Server-R1
ip domain name ainetsec.local
ip domain-lookup
ip name-server 192.168.200.1 1.1.1.1 8.8.8.8
ip routing
vtp mode off
no ip http server
no ip http secure-server
service timestamps debug datetime localtime
service timestamps log datetime localtime
service password-encryption
enable algo sha256 secret AINetSec
username admin priv 15 algo sha256 secret AINetSec2025
crypto key generate rsa general mod 2024
ip ssh version 2
ip ssh authentication-retries 3
ip ssh time-out 60
ip ssh logging events
login on-failure log
login on-success log
aaa new-model

radius server ubuntu-server
	add ipv4 192.168.200.2 auth-port 1812 acct-port 1813
	key AINetSec2025
	exit

aaa group server radius RADIUS-Servers
	server name ubuntu-server
	exit

aaa authentication attempts login 3
aaa authentication login CONSOLE local
aaa authentication login default group RADIUS-Servers local
aaa authorization exec default group RADIUS-Servers local

ip access-list ext SSH
	permit tcp 192.168.0.0 0.0.0.255 any eq 22
	permit tcp 192.168.1.0 0.0.0.255 any eq 22
	permit tcp 192.168.2.0 0.0.0.255 any eq 22
	permit tcp 192.168.3.0 0.0.0.255 any eq 22
	exit

line con 0
	logging sync
	login authentication CONSOLE
	exec-timeout 5 0
	privilege level 15
	exit

line vty 0 4
	logging sync
	login authentication default
	exec-timeout 5 0
	transport input ssh
	access-class SSH in
	exit

ntp server 192.168.200.1
ntp update-calendar
clock timezone PH 8 0

banner exec #

   WARNING: Unauthorized access is strictly prohibited!

#

banner login #

   WARNING: Unauthorized access is strictly prohibited!

#

banner motd #

   WARNING: Unauthorized access is strictly prohibited!

#

banner incoming #

   WARNING: Unauthorized access is strictly prohibited!

#

spanning mode rapid
spanning portfast edge default
spanning portfast edge bpduguard default
spanning etherchannel guard misconfig

vlan 10
	name MGMT
vlan 200
	name Server
vlan 800
	name LAN
vlan 666
	name Blackhole
vlan 999
	name Native
	exit

int lo0
	ip add 111.0.0.250 255.255.255.255
	desc Loopback interface 0
	no shut

int vlan 10
	ip add 192.168.0.250 255.255.255.0
	desc MGMT
	no shut
int vlan 200
	ip add 192.168.200.14 255.255.255.240
	desc Server GW
	no shut
int vlan 800
	ip add 172.16.2.5 255.255.255.248
	desc LAN
	no shut
	exit

ip tftp source-interface vlan 10
ip ssh source-interface vlan 10
ip radius source-interface vlan 10

int range g0/0-3, g1/0-3, g2/0-3, g3/0-3
	shut
	switch mode access
	switch access vlan 666
	switch nonego
	switch port-sec mac-add sticky
	switch port-sec max 1
	switch port-sec violation restrict
	exit

errdisable recovery cause psecure-violation
errdisable recovery cause bpduguard
errdisable recovery cause channel-misconfig
errdisable recovery cause loopback
errdisable recovery cause gbic-invalid
errdisable recovery cause link-flap
errdisable recovery cause udld
errdisable recovery interval 180

int g0/0
	switch trunk encap dot1q
	switch mode trunk
	switch nonego
	switch trunk native vlan 999
	switch trunk allowed vlan 10,999
	desc To HQ-Int-SW1 g1/0
	no shut
int g1/1
	switch access vlan 200
	desc To WIN-SERVER
	no shut
int g1/2
	switch access vlan 200
	desc To ubuntu-server
	no shut

int range g1/1-2
	spanning bpdufilter enable
	exit
int range g0/1-2
	channel-group 1 mode desirable
int po1
	switch trunk encap dot1q
	switch mode trunk
	switch nonego
	switch trunk native vlan 999
	switch trunk allowed vlan 800,999
	desc To HQ-Int-SW1 po3
	no shut
	exit
int range g0/1-2
	no shut
	exit

router ospf 1
	area 0 authentication message-digest
	network 111.0.0.250 0.0.0.0 area 0
	network 172.16.2.0 0.0.0.7 area 0
	network 192.168.200.0 0.0.0.15 area 0
	passive default
	no passive vlan 800
	exit

int range vlan 10, vlan 200, vlan 800
	ip ospf authentication message-digest
	ip ospf message-digest-key 1 md5 AINetSec2025
	exit

ip route 192.168.0.0 255.255.255.0 vlan 10 192.168.0.1 111
ip route 0.0.0.0 0.0.0.0 vlan 800 172.16.2.4 111

end

copy run start

